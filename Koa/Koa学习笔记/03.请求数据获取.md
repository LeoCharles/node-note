# 请求数据获取

## GET 请求数据获取

获取 `GET` 请求数据源头是 `ctx.request` 对象中的 `query` 方法 和 `querystring` 方法。

也可以直接从 `ctx` 中获取 `query` 和 `querystring`。

`query` 返回格式化好的参数对象，如 `{a: 1, b: 2}`。

`querystring` 返回的是请求字符串，如 `a=1&b=2`。

```js
const Koa = require('koa')
const app = new Koa()

app.use(async (ctx) => {
  let url = ctx.url

  // 从上下文中直接获取
  let ctx_query = ctx.query
  let ctx_querystring = ctx.querystring

  // 从上下文的 request 对象中获取
  let request = ctx.request
  let req_query = request.query
  let req_querystring = request.querystring

  ctx.body = {
    url
    ctx_query,
    ctx_querystring,
    req_query,
    req_querystring
  }
})

app.listen(8787, () => console.log('http server is runing at port 8787'))
```

## POST 请求数据获取

Koa 中没有封装获取 `POST` 参数的方法，需要通过解析上下文对象中原生的 Node.js 请求对象 `req` 来获取。

> `ctx.request` 是 Koa 封装的请求对象，用起来更直观和简单，`ctx.req` 是原生 Node.js 请求对象，可以得到更多内容。

获取 `POST` 请求数据的步骤：

1. 解析上下文对象中的原生 Node.js 请求对象 `ctx.req`。

2. 将 `POST` 表单数据解析成 `querysting` 字符串，如：`user=leo&age=18`。

3. 将字符转换城 JSON 格式，如：`{"leo": "leo", "age": "18"}`。

```js

```

## koa-bodyparser 中间件
