# Koa2快速开始

## 快速开始

Node.js 环境要在 **v7.6.0** 以上。

### 安装 Koa2

```bash
# 初始化 package.json
npm init
# 安装 koa2
npm install koa
```

### hello world 代码

```js
const Koa = require('koa')
// 创建实例
const app = new Koa()

app.use(async (ctx) => {
  ctx.body = 'hello koa2!'
})

// 监听端口
app.listen(8787, () => console.log('http server is runing at port 8787'))
```

## async / await 使用

`async` 用来声明一个方法是异步的，`await` 是等待异步方法完成，`await` 必须在 `async` 方法中才可以使用。

`async` 返回的是 `Promise` 对象。

`await` 等待一个表达式，可以是 `Promise` 对象，也可以是普通值。

使用 `async / await` 可以让异步逻辑用同步的写法实现，避免了传统的 `callback` 嵌套。

```js
function getSyncTime() {
  return new Promise((resolve, reject) => {
    try {
      let startTime = new Date().getTime()
      setTimeout(() => {
        let endTime = new Date().getTime()
        let data = endTime - startTime
        resolve( data )
      }, 500)
    } catch ( err ) {
      reject( err )
    }
  })
}

async function getSyncData() {
  let time = await getSyncTime()
  let data = `endTime - startTime = ${time}`
  return data
}

async function getData() {
  let data = await getSyncData()
  console.log( data )
}

getData()

//
// 
```

## 中间件的开发与使用

### 